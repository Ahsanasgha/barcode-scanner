<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Barcode/QR code Scanner</title>
  <meta name="description" content="A Progressive Web Application (PWA) that scans barcodes of various formats, using the Barcode Detection API.">
  <link rel="shortcut icon" href="assets/app-icons/favicon.ico">
  <link rel="apple-touch-icon" href="assets/app-icons/apple-touch-icon.png">
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#212529">
  <meta name="color-scheme" content="light dark">
  <link rel="stylesheet" href="css/water.css">
  <link rel="stylesheet" href="css/main.css">
</head>
<body>
  <noscript>
    <div class="noscript">
      JavaScript is required to properly view this site.
    </div>
  </noscript>

  <div class="toastContainer">
    <div id="toastContainer"></div>
  </div>

  <button id="settingsBtn" class="settings-button">
    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-gear-fill" viewBox="0 0 16 16">
      <path d="M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872l-.1-.34zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z"/>
    </svg>
    <span class="visually-hidden">Settings</span>
  </button>

  <dialog id="settingsDialog" class="settings-dialog">
    <header>
      Settings
      <form method="dialog">
        <button type="submit">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16">
            <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z" />
          </svg>
          <span class="visually-hidden">Close</span>
        </button>
      </form>
    </header>

    <form name="settings-form" autocomplete="false">
      <h4>When barcode is found...</h4>

      <ul>
        <li>
          <input type="checkbox" id="beep" name="beep">
          <label for="beep">Beep</label>
        </li>
        <li>
          <input type="checkbox" id="vibrate" name="vibrate">
          <label for="vibrate">Vibrate (mobile)</label>
        </li>
        <li>
          <input type="checkbox" id="openWebPage" name="openWebPage">
          <label for="openWebPage">Open web pages automatically</label>
        </li>
      </ul>
    </form>
  </dialog>

  <header class="site-header">
    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" width="80" height="80" xml:space="preserve" class="logo">
      <path fill="var(--links)" d="M93.867,51.2H8.533C3.814,51.2,0,55.014,0,59.733v85.333c0,4.719,3.814,8.533,8.533,8.533s8.533-3.814,8.533-8.533v-76.8 h76.8c4.719,0,8.533-3.814,8.533-8.533S98.586,51.2,93.867,51.2z" />
      <path fill="var(--links)" d="M503.467,51.2h-85.333c-4.719,0-8.533,3.814-8.533,8.533s3.814,8.533,8.533,8.533h76.8v76.8c0,4.719,3.814,8.533,8.533,8.533c4.719,0,8.533-3.814,8.533-8.533V59.733C512,55.014,508.186,51.2,503.467,51.2z" />
      <path fill="var(--links)" d="M503.467,358.4c-4.719,0-8.533,3.814-8.533,8.533v76.8h-76.8c-4.719,0-8.533,3.814-8.533,8.533s3.814,8.533,8.533,8.533h85.333c4.719,0,8.533-3.814,8.533-8.533v-85.333C512,362.214,508.186,358.4,503.467,358.4z" />
      <path fill="var(--links)" d="M93.867,443.733h-76.8v-76.8c0-4.719-3.814-8.533-8.533-8.533S0,362.214,0,366.933v85.333c0,4.719,3.814,8.533,8.533,8.533h85.333c4.719,0,8.533-3.814,8.533-8.533S98.586,443.733,93.867,443.733z" />
      <path fill="var(--links)" d="M503.467,247.467H8.533C3.814,247.467,0,251.281,0,256s3.814,8.533,8.533,8.533h494.933c4.719,0,8.533-3.814,8.533-8.533S508.186,247.467,503.467,247.467z" />
      <path fill="currentColor" d="M119.467,119.467c-4.71,0-8.533,3.823-8.533,8.533v93.867c0,4.71,3.823,8.533,8.533,8.533s8.533-3.823,8.533-8.533V128C128,123.29,124.177,119.467,119.467,119.467z" />
      <path fill="currentColor" d="M153.6,119.467c-4.71,0-8.533,3.823-8.533,8.533v93.867c0,4.71,3.823,8.533,8.533,8.533c4.71,0,8.533-3.823,8.533-8.533V128C162.133,123.29,158.31,119.467,153.6,119.467z" />
      <path fill="currentColor" d="M187.733,119.467c-4.71,0-8.533,3.823-8.533,8.533v93.867c0,4.71,3.823,8.533,8.533,8.533s8.533-3.823,8.533-8.533V128C196.267,123.29,192.444,119.467,187.733,119.467z" />
      <path fill="currentColor" d="M221.867,119.467c-4.71,0-8.533,3.823-8.533,8.533v93.867c0,4.71,3.823,8.533,8.533,8.533c4.71,0,8.533-3.823,8.533-8.533V128C230.4,123.29,226.577,119.467,221.867,119.467z" />
      <path fill="currentColor" d="M256,119.467c-4.71,0-8.533,3.823-8.533,8.533v93.867c0,4.71,3.823,8.533,8.533,8.533s8.533-3.823,8.533-8.533V128C264.533,123.29,260.71,119.467,256,119.467z" />
      <path fill="currentColor" d="M290.133,119.467c-4.71,0-8.533,3.823-8.533,8.533v93.867c0,4.71,3.823,8.533,8.533,8.533s8.533-3.823,8.533-8.533V128C298.667,123.29,294.844,119.467,290.133,119.467z" />
      <path fill="currentColor" d="M324.267,119.467c-4.71,0-8.533,3.823-8.533,8.533v93.867c0,4.71,3.823,8.533,8.533,8.533s8.533-3.823,8.533-8.533V128C332.8,123.29,328.977,119.467,324.267,119.467z" />
      <path fill="currentColor" d="M358.4,119.467c-4.71,0-8.533,3.823-8.533,8.533v93.867c0,4.71,3.823,8.533,8.533,8.533s8.533-3.823,8.533-8.533V128C366.933,123.29,363.11,119.467,358.4,119.467z" />
      <path fill="currentColor" d="M392.533,119.467c-4.71,0-8.533,3.823-8.533,8.533v93.867c0,4.71,3.823,8.533,8.533,8.533c4.71,0,8.533-3.823,8.533-8.533V128C401.067,123.29,397.244,119.467,392.533,119.467z" />
      <path fill="currentColor" d="M119.467,281.6c-4.71,0-8.533,3.823-8.533,8.533v110.933c0,4.71,3.823,8.533,8.533,8.533s8.533-3.823,8.533-8.533V290.133C128,285.423,124.177,281.6,119.467,281.6z" />
      <path fill="currentColor" d="M153.6,281.6c-4.71,0-8.533,3.823-8.533,8.533V384c0,4.71,3.823,8.533,8.533,8.533c4.71,0,8.533-3.823,8.533-8.533v-93.867C162.133,285.423,158.31,281.6,153.6,281.6z" />
      <path fill="currentColor" d="M187.733,281.6c-4.71,0-8.533,3.823-8.533,8.533V384c0,4.71,3.823,8.533,8.533,8.533s8.533-3.823,8.533-8.533v-93.867C196.267,285.423,192.444,281.6,187.733,281.6z" />
      <path fill="currentColor" d="M221.867,281.6c-4.71,0-8.533,3.823-8.533,8.533V384c0,4.71,3.823,8.533,8.533,8.533c4.71,0,8.533-3.823,8.533-8.533v-93.867C230.4,285.423,226.577,281.6,221.867,281.6z" />
      <path fill="currentColor" d="M256,281.6c-4.71,0-8.533,3.823-8.533,8.533V384c0,4.71,3.823,8.533,8.533,8.533s8.533-3.823,8.533-8.533v-93.867C264.533,285.423,260.71,281.6,256,281.6z" />
      <path fill="currentColor" d="M290.133,281.6c-4.71,0-8.533,3.823-8.533,8.533V384c0,4.71,3.823,8.533,8.533,8.533s8.533-3.823,8.533-8.533v-93.867C298.667,285.423,294.844,281.6,290.133,281.6z" />
      <path fill="currentColor" d="M324.267,281.6c-4.71,0-8.533,3.823-8.533,8.533V384c0,4.71,3.823,8.533,8.533,8.533S332.8,388.71,332.8,384v-93.867C332.8,285.423,328.977,281.6,324.267,281.6z" />
      <path fill="currentColor" d="M358.4,281.6c-4.71,0-8.533,3.823-8.533,8.533V384c0,4.71,3.823,8.533,8.533,8.533s8.533-3.823,8.533-8.533v-93.867C366.933,285.423,363.11,281.6,358.4,281.6z" />
      <path fill="currentColor" d="M392.533,281.6c-4.71,0-8.533,3.823-8.533,8.533v110.933c0,4.71,3.823,8.533,8.533,8.533c4.71,0,8.533-3.823,8.533-8.533V290.133C401.067,285.423,397.244,281.6,392.533,281.6z" />
    </svg>

    <h1>Barcode/QR code Scanner</h1>

    <div class="fork">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16">
        <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
      </svg>

      <span>
        Fork me on <a href="https://github.com/georapbox/barcode-scanner" target="_blank" rel="noreferrer noopener">Github</a>
      </span>
    </div>
  </header>

  <div class="container" style="max-width: 250px;">
    <select name="scanMethod" id="scanMethod" title="Select method">
      <option value="" disabled>-- Select scan method --</option>
      <option value="cameraView">Scan from webcam</option>
      <option value="fileView">Scan from image</option>
    </select>
  </div>

  <div class="container" id="cameraView">
    <div class="scan-frame-container">
      <resize-observer>
        <capture-photo facing-mode="environment" output-disabled>
          <span slot="capture-button" hidden></span>
          <span slot="facing-mode-button" hidden></span>
        </capture-photo>
      </resize-observer>

      <div id="scanFrame" class="scan-frame" hidden>
        <svg viewBox="0 0 100 100">
          <path d="M15,2 L2,2 L2,15" fill="none" stroke="var(--scan-frame-color)" stroke-width="2" stroke-linejoin="round" />
          <path d="M2,85 L2,98 L15,98" fill="none" stroke="var(--scan-frame-color)" stroke-width="2" stroke-linejoin="round" />
          <path d="M85,98 L98,98 L98,85" fill="none" stroke="var(--scan-frame-color)" stroke-width="2" stroke-linejoin="round" />
          <path d="M98,15 L98,2 L85,2" fill="none" stroke="var(--scan-frame-color)" stroke-width="2" stroke-linejoin="round" />
        </svg>
      </div>
    </div>

    <div id="scanInstructions" class="scan-instructions" hidden>
      <p>Align Barcode/QR Code in the center of the frame.</p>
    </div>

    <div class="scan-cta-container">
      <button type="button" id="scanBtn" hidden>Start scanning</button>
    </div>

    <fieldset id="cameraResults" class="results">
      <legend class="results__legend">Scan results</legend>

      <clipboard-copy from="#cameraResults .results__item">
        <button slot="button" type="button" aria-label="Copy to clipboard">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M8 5H6C4.89543 5 4 5.89543 4 7V19C4 20.1046 4.89543 21 6 21H16C17.1046 21 18 20.1046 18 19V18M8 5C8 6.10457 8.89543 7 10 7H12C13.1046 7 14 6.10457 14 5M8 5C8 3.89543 8.89543 3 10 3H12C13.1046 3 14 3.89543 14 5M14 5H16C17.1046 5 18 5.89543 18 7V10M20 14H10M10 14L13 11M10 14L13 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </clipboard-copy>
    </fieldset>
  </div>

  <div class="container" id="fileView" hidden>
    <div id="dropzone" class="dropzone">
      <span>Drag & drop an image to scan</span>
    </div>

    <input type="file" name="file[]" id="fileInput" autocomplete="off" />

    <fieldset id="fileResults" class="results">
      <legend class="results__legend">Scan results</legend>

      <clipboard-copy from="#fileResults .results__item">
        <button slot="button" type="button" aria-label="Copy to clipboard">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M8 5H6C4.89543 5 4 5.89543 4 7V19C4 20.1046 4.89543 21 6 21H16C17.1046 21 18 20.1046 18 19V18M8 5C8 6.10457 8.89543 7 10 7H12C13.1046 7 14 6.10457 14 5M8 5C8 3.89543 8.89543 3 10 3H12C13.1046 3 14 3.89543 14 5M14 5H16C17.1046 5 18 5.89543 18 7V10M20 14H10M10 14L13 11M10 14L13 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </clipboard-copy>
    </fieldset>
  </div>

  <footer>
    <p>
      Licensed under <a href="https://georapbox.mit-license.org/@2022" target="_blank" rel="noopener">The MIT License (MIT)</a>
    </p>
  </footer>

  <script src="./js/register-service-worker.js" type="module"></script>
  <script src="./js/index.js" type="module"></script>
</body>
</html>
