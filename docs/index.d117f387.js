!function(){
/*!
 * @georapbox/clipboard-copy-element
 * A custom element that implements the Clipboard API to copy text content from elements or input values to the clipboard.
 *
 * @version v1.0.2
 * @author George Raptis <georapbox@gmail.com>
 * @homepage https://github.com/georapbox/clipboard-copy-element#readme
 * @repository git+https://github.com/georapbox/clipboard-copy-element.git
 * @license MIT
 */
const t=document.createElement("template"),e=String.raw;t.innerHTML=e`
  <slot name="button"><button type="button" part="button"><slot name="button-content">Copy</slot></button></slot>
`;class o extends HTMLElement{static get observedAttributes(){return["disabled"]}connectedCallback(){this._buttonSlot&&this._buttonSlot.addEventListener("slotchange",this._onSlotChange),this.$button&&this.$button.addEventListener("click",this._onClick),this._upgradeProperty("value"),this._upgradeProperty("from"),this._upgradeProperty("disabled")}disconnectedCallback(){this._buttonSlot.removeEventListener("slotchange",this._onSlotChange),this.$button&&this.$button.removeEventListener("click",this._onClick)}attributeChangedCallback(t){"disabled"===t&&this.$button&&(this.$button.disabled=this.disabled,this.$button.setAttribute("aria-disabled",this.disabled),this.$button.part&&this.$button.part.contains("button")&&this.$button.part.toggle("button--disabled",this.disabled))}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get value(){return this.getAttribute("value")}set value(t){this.setAttribute("value",t)}get from(){return this.getAttribute("from")}set from(t){this.setAttribute("from",t)}async _copy(){if(this.value||this.from)try{let t="";if(this.value)t=this.value;else if(this.from){const e=("getRootNode"in Element.prototype?this.$button.getRootNode({composed:!0}):this.$button.ownerDocument).querySelector(this.from);if(!e)return;t=e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement?e.value:e instanceof HTMLAnchorElement&&e.hasAttribute("href")?e.href:e.textContent}await navigator.clipboard.writeText(t),this.dispatchEvent(new CustomEvent("clipboard-copy:success",{bubbles:!0,composed:!0,detail:{value:t}}))}catch(t){this.dispatchEvent(new CustomEvent("clipboard-copy:error",{bubbles:!0,composed:!0,detail:{error:t}}))}}_getButton(){return this._buttonSlot?this._buttonSlot.assignedElements({flatten:!0}).find((t=>"BUTTON"===t.nodeName||"button"===t.getAttribute("slot"))):null}_onClick(t){t.preventDefault(),this.disabled||(this.dispatchEvent(new Event("clipboard-copy:click",{bubbles:!0,composed:!0})),this._copy())}_onSlotChange(t){t.target&&"button"===t.target.name&&(this.$button&&this.$button.removeEventListener("click",this._onClick),this.$button=this._getButton(),this.$button&&(this.$button.addEventListener("click",this._onClick),"BUTTON"===this.$button.nodeName||this.$button.hasAttribute("role")||this.$button.setAttribute("role","button")))}_upgradeProperty(t){if(Object.prototype.hasOwnProperty.call(this,t)){const e=this[t];delete this[t],this[t]=e}}static defineCustomElement(t="clipboard-copy"){"undefined"==typeof window||window.customElements.get(t)||window.customElements.define(t,o)}constructor(){super(),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(t.content.cloneNode(!0))),this._buttonSlot=this.shadowRoot.querySelector('slot[name="button"]'),this.$button=this._getButton(),this._onClick=this._onClick.bind(this),this._onSlotChange=this._onSlotChange.bind(this)}}o.defineCustomElement();
/*!
 * @georapbox/resize-observer-element
 * A custom element that offers a declarative interface to the ResizeObserver API.
 *
 * @version v1.0.1
 * @author George Raptis <georapbox@gmail.com>
 * @homepage https://github.com/georapbox/resize-observer-element#readme
 * @repository git+https://github.com/georapbox/resize-observer-element.git
 * @license MIT
 */
const n=document.createElement("template"),i=String.raw;n.innerHTML=i`
  <style>:host { display: contents; }</style>
  <slot></slot>
`;class r extends HTMLElement{static get observedAttributes(){return["disabled"]}attributeChangedCallback(t,e,o){"disabled"===t&&e!==o&&(this.disabled?this._stopObserver():this._startObserver())}connectedCallback(){"ResizeObserver"in window&&(this._resizeObserver=new ResizeObserver((t=>{this.dispatchEvent(new CustomEvent("resize-observer:resize",{bubbles:!0,composed:!0,detail:{entries:t}}))})),this.disabled||this._startObserver(),this._slot.addEventListener("slotchange",this._onSlotChange))}disconnectedCallback(){this._stopObserver(),this._slot.removeEventListener("slotchange",this._onSlotChange)}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}_startObserver(){this._slot&&this._resizeObserver&&(this._observedElements.forEach((t=>this._resizeObserver.unobserve(t))),this._observedElements=[],this._slot.assignedElements().forEach((t=>{this._resizeObserver.observe(t),this._observedElements.push(t)})))}_stopObserver(){this._resizeObserver&&this._resizeObserver.disconnect()}_onSlotChange(){this.disabled||this._startObserver()}_upgradeProperty(t){if(Object.prototype.hasOwnProperty.call(this,t)){const e=this[t];delete this[t],this[t]=e}}static defineCustomElement(t="resize-observer"){"undefined"==typeof window||window.customElements.get(t)||window.customElements.define(t,r)}constructor(){super(),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(n.content.cloneNode(!0))),this._slot=this.shadowRoot.querySelector("slot"),this._resizeObserver=null,this._observedElements=[],this._onSlotChange=this._onSlotChange.bind(this),this._upgradeProperty("disabled")}}r.defineCustomElement();
/*!
 * @georapbox/capture-photo-element
 * A custom element that implements the MediaDevices.getUserMedia() method of the MediaDevices interface to capture a photo in the browser.
 *
 * @version v1.3.1
 * @author George Raptis <georapbox@gmail.com>
 * @homepage https://github.com/georapbox/capture-photo-element#readme
 * @repository git+https://github.com/georapbox/capture-photo-element.git
 * @license MIT
 */
const s=document.createElement("template");s.innerHTML='\n  <style>\n    :host {\n      all: initial;\n      display: block;\n      box-sizing: border-box;\n    }\n    :host *,\n    :host *::before,\n    :host *::after {\n      box-sizing: inherit;\n    }\n    :host video {\n      display: block;\n    }\n    :host #output:empty {\n      display: none;\n    }\n    [hidden] {\n      display: none !important;\n    }\n  </style>\n  <video part="video" playsinline></video>\n  <canvas hidden></canvas>\n  <div part="actions-container">\n    <slot name="capture-button">\n      <button part="capture-button" type="button"><slot name="capture-button-content">Capture photo</slot></button>\n    </slot>\n    <slot name="facing-mode-button"><button part="facing-mode-button" type="button"><slot name="facing-mode-button-content">Toggle facing mode</slot></button></slot>\n  </div>\n  <div part="output-container" id="output"></div>\n';class a extends HTMLElement{connectedCallback(){if(this._connected=!0,this._canvasElement=this.shadowRoot.querySelector("canvas"),this._outputElement=this.shadowRoot.getElementById("output"),this._videoElement=this.shadowRoot.querySelector("video"),this._videoElement&&this._videoElement.addEventListener("loadedmetadata",this._onVideoLoadedMetaData),this._captureButtonSlot=this.shadowRoot.querySelector('slot[name="capture-button"]'),this._captureButtonSlot&&this._captureButtonSlot.addEventListener("slotchange",this._onCaptureButtonSlotChange),this._captureButton=this._getCaptureButton(),this._captureButton&&this._captureButton.addEventListener("click",this._onCapturePhotoButtonClick),this._facingModeButtonSlot=this.shadowRoot.querySelector('slot[name="facing-mode-button"]'),this._facingModeButtonSlot&&this._facingModeButtonSlot.addEventListener("slotchange",this._onFacingModeButtonSlotChange),this._facingModeButton=this._getFacingModeButton(),this._facingModeButton&&(this._supportedConstraints.facingMode?this._facingModeButton.addEventListener("click",this._onFacingModeButtonClick):this._facingModeButton.hidden=!0),this._upgradeProperty("outputDisabled"),this._upgradeProperty("facingMode"),this._upgradeProperty("cameraResolution"),this._upgradeProperty("zoom"),!a.isSupported())return this.dispatchEvent(new CustomEvent("capture-photo:error",{bubbles:!0,composed:!0,detail:{error:{name:"NotSupportedError",message:"Not supported"}}}));this._requestGetUserMedia()}disconnectedCallback(){this._stopVideoStreaming(),this._facingModeButton&&this._facingModeButton.removeEventListener("click",this._onFacingModeButtonClick),this._captureButton&&this._captureButton.removeEventListener("click",this._onCapturePhotoButtonClick),this._videoElement&&this._videoElement.removeEventListener("canplay",this._onVideoLoadedMetaData),this._captureButtonSlot&&this._captureButtonSlot.removeEventListener("slotchange",this._onCaptureButtonSlotChange),this._facingModeButtonSlot&&this._facingModeButtonSlot.removeEventListener("slotchange",this._onFacingModeButtonSlotChange)}attributeChangedCallback(t,e,o){this._connected&&("output-disabled"===t&&this._emptyOutputElement(),"facing-mode"===t&&this._supportedConstraints.facingMode&&e!==o&&(this._stopVideoStreaming(),this._requestGetUserMedia(),this.dispatchEvent(new CustomEvent("capture-photo:facing-mode-change",{bubbles:!0,composed:!0,detail:{facingMode:o}}))),"camera-resolution"===t&&e!==o&&(this._stopVideoStreaming(),this._requestGetUserMedia(),this.dispatchEvent(new CustomEvent("capture-photo:camera-resolution-change",{bubbles:!0,composed:!0,detail:{cameraResolution:o}}))),"zoom"===t&&e!==o&&(this._applyZoom(this.zoom),this.dispatchEvent(new CustomEvent("capture-photo:zoom-change",{bubbles:!0,composed:!0,detail:{zoom:this.zoom}}))))}static get observedAttributes(){return["output-disabled","facing-mode","camera-resolution","zoom"]}get outputDisabled(){return this.hasAttribute("output-disabled")}set outputDisabled(t){t?this.setAttribute("output-disabled",""):this.removeAttribute("output-disabled")}get facingMode(){return this.getAttribute("facing-mode")}set facingMode(t){this.setAttribute("facing-mode",t)}get cameraResolution(){return this.getAttribute("camera-resolution")}set cameraResolution(t){this.setAttribute("camera-resolution",t)}get zoom(){return Number(this.getAttribute("zoom"))||null}set zoom(t){const e=Number(t)||0;this.setAttribute("zoom",e>0?Math.floor(e):0)}get loading(){return this.hasAttribute("loading")}_stopVideoStreaming(){if(!this._videoElement||!this._stream)return;const[t]=this._stream.getVideoTracks();t&&t.stop(),this._videoElement.srcObject=null,this._stream=null}_requestGetUserMedia(){if(!a.isSupported())return;this.setAttribute("loading","");const t={video:{facingMode:{ideal:this.facingMode||"user"}},audio:!1};if("string"==typeof this.cameraResolution){const[e,o]=this.cameraResolution.split("x");t.video.width=e,t.video.height=o}navigator.mediaDevices.getUserMedia(t).then((t=>{this._videoElement.srcObject=t,this._stream=t,this._applyZoom(this.zoom)})).catch((t=>{this.dispatchEvent(new CustomEvent("capture-photo:error",{bubbles:!0,composed:!0,detail:{error:t}}))})).finally((()=>{this.removeAttribute("loading")}))}capture(){if(!this.loading)try{const t=this._canvasElement.getContext("2d"),e=this._videoElement.videoWidth,o=this._videoElement.videoHeight;this._canvasElement.width=e,this._canvasElement.height=o,t.drawImage(this._videoElement,0,0,e,o);const n=this._canvasElement.toDataURL("image/png");if("string"==typeof n&&n.includes("data:image")){if(!this.outputDisabled){const t=new Image;t.src=n,t.width=e,t.height=o,t.part="output-image",this._emptyOutputElement(),this._outputElement&&this._outputElement.appendChild(t)}this.dispatchEvent(new CustomEvent("capture-photo:success",{bubbles:!0,composed:!0,detail:{dataURI:n,width:e,height:o}}))}}catch(t){this.dispatchEvent(new CustomEvent("capture-photo:error",{bubbles:!0,composed:!0,detail:{error:t}}))}}_onFacingModeButtonClick(t){t.preventDefault(),this.loading||(this.facingMode="user"!==this.facingMode&&this.facingMode?"user":"environment")}_onCapturePhotoButtonClick(t){t.preventDefault(),this.capture()}_onVideoLoadedMetaData(t){const e=t.target;e.play().then((()=>{this.dispatchEvent(new CustomEvent("capture-photo:video-play",{bubbles:!0,composed:!0,detail:{video:e}}))})).catch((t=>{this.dispatchEvent(new CustomEvent("capture-photo:error",{bubbles:!0,composed:!0,detail:{error:t}}))})).finally((()=>{this.removeAttribute("loading")}))}_emptyOutputElement(){this._outputElement&&Array.from(this._outputElement.childNodes).forEach((t=>t.remove()))}_applyZoom(t){if(!this._stream||!t)return;const[e]=this._stream.getVideoTracks();if("function"!=typeof e.getCapabilities||"function"!=typeof e.getSettings)return;const o=e.getCapabilities();var n,i,r;"zoom"in e.getSettings()&&e.applyConstraints({advanced:[{zoom:(n=Number(t),i=o.zoom.min,r=o.zoom.max,Number.isNaN(i)&&(i=0),Number.isNaN(r)&&(r=0),Math.min(Math.max(n,Math.min(i,r)),Math.max(i,r)))}]})}_onCaptureButtonSlotChange(t){t.target&&"capture-button"===t.target.name&&(this._captureButton&&this._captureButton.removeEventListener("click",this._onCapturePhotoButtonClick),this._captureButton=this._getCaptureButton(),this._captureButton&&(this._captureButton.addEventListener("click",this._onCapturePhotoButtonClick),"BUTTON"===this._captureButton.nodeName||this._captureButton.hasAttribute("role")||this._captureButton.setAttribute("role","button")))}_onFacingModeButtonSlotChange(t){t.target&&"facing-mode-button"===t.target.name&&(this._facingModeButton&&this._facingModeButton.removeEventListener("click",this._onFacingModeButtonClick),this._facingModeButton=this._getFacingModeButton(),this._facingModeButton&&(this._facingModeButton.addEventListener("click",this._onFacingModeButtonClick),"BUTTON"===this._facingModeButton.nodeName||this._facingModeButton.hasAttribute("role")||this._facingModeButton.setAttribute("role","button")))}_getFacingModeButton(){return this._facingModeButtonSlot?this._facingModeButtonSlot.assignedElements({flatten:!0}).find((t=>"BUTTON"===t.nodeName||"facing-mode-button"===t.getAttribute("slot"))):null}_getCaptureButton(){return this._captureButtonSlot?this._captureButtonSlot.assignedElements({flatten:!0}).find((t=>"BUTTON"===t.nodeName||"capture-button"===t.getAttribute("slot"))):null}_upgradeProperty(t){if(Object.prototype.hasOwnProperty.call(this,t)){const e=this[t];delete this[t],this[t]=e}}static isSupported(){return Boolean(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)}static defineCustomElement(t="capture-photo"){"undefined"==typeof window||window.customElements.get(t)||window.customElements.define(t,a)}constructor(){super(),this._connected=!1,this._supportedConstraints=a.isSupported()?navigator.mediaDevices.getSupportedConstraints():{},this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(s.content.cloneNode(!0))),this._onFacingModeButtonClick=this._onFacingModeButtonClick.bind(this),this._onCapturePhotoButtonClick=this._onCapturePhotoButtonClick.bind(this),this._onVideoLoadedMetaData=this._onVideoLoadedMetaData.bind(this),this._onCaptureButtonSlotChange=this._onCaptureButtonSlotChange.bind(this),this._onFacingModeButtonSlotChange=this._onFacingModeButtonSlotChange.bind(this)}}
/*!
 * @georapbox/web-storage
 * WebStorage is a JavaScript library that improves the way you work with localStorage or sessionStorage using a simple, localStorage-like API. It allows developers to store many types of data instead of just strings.
 *
 * @version v2.1.0
 * @author George Raptis <georapbox@gmail.com>
 * @homepage https://github.com/georapbox/web-storage#readme
 * @repository https://github.com/georapbox/web-storage.git
 * @license MIT
 */function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function l(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function h(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?l(Object(o),!0).forEach((function(e){u(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):l(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function m(t){return String.prototype.trim?t.trim():t.replace(/(^\s*|\s*$)/g,"")}function p(t,e){return 0===t.indexOf(e)?t.slice(e.length):t}function g(t){return null!=t&&("string"==typeof t||"[object String]"===Object.prototype.toString.call(t))}function b(t){var e=Object.prototype.toString.call(t);return"[object AsyncFunction]"===e||"[object Function]"===e||"[object GeneratorFunction]"===e}function v(t,e){var o=t._driver;Object.keys(o).forEach((function(n){(function(t,e){var o,n;return o=e,n=t._keyPrefix,o.substr(0,n.length)===n})(t,n)&&e(n,o[n])}))}var f=function(){},_={getItem:f,setItem:f,removeItem:f};function y(t){try{var e=window[t],o="__web-storage__test";e.setItem(o,"test"),e.getItem(o),e.removeItem(o)}catch(t){return!1}return!0}function E(t){return y(t)?window[t]:(console&&console.warn&&console.warn("WebStorage failed to create sync storage; falling back to noop storage."),_)}var w=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c(this,t);var o={driver:"localStorage",keyPrefix:"web-storage/"};if("localStorage"!==(e=h(h({},o),e)).driver&&"sessionStorage"!==e.driver)throw new Error('The "driver" option must be one of "localStorage" or "sessionStorage".');if(!g(e.keyPrefix))throw new TypeError('The "keyPrefix" option must be a string.');this._storageType=e.driver,this._driver=E(e.driver),this._keyPrefix=m(e.keyPrefix)}var e;return e=[{key:"getItem",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if(!g(t))throw new TypeError("Failed to execute 'getItem' on 'Storage': The first argument must be a string.");var o=null;try{var n=this._driver.getItem(this._keyPrefix+t),i=JSON.parse(n);o=i}catch(t){e(t)}return o}},{key:"setItem",value:function(t,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(!g(t))throw new TypeError("Failed to execute 'setItem' on 'Storage': The first argument must be a string.");t=this._keyPrefix+t,e=null==e||b(e)?null:e;try{this._driver.setItem(t,JSON.stringify(e))}catch(t){o(t)}}},{key:"removeItem",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if(!g(t))throw new TypeError("Failed to execute 'removeItem' on 'Storage': The first argument must be a string.");try{this._driver.removeItem(this._keyPrefix+t)}catch(t){e(t)}}},{key:"clear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};try{v(this,this._driver.removeItem.bind(this._driver))}catch(e){t(e)}}},{key:"keys",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},o=[];try{return v(this,(function(e){return o.push(p(e,t._keyPrefix))})),o}catch(t){e(t)}}},{key:"length",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};try{return this.keys().length}catch(e){t(e)}}},{key:"iterate",value:function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if(!b(t))throw new TypeError("Failed to iterate on 'Storage': 'iteratorCallback' must be a function.");try{v(this,(function(o,n){var i=p(o,e._keyPrefix),r=JSON.parse(n);t.call(e,r,i)}))}catch(t){o(t)}}}],d(t.prototype,e),t}();w.isAvailable=function(t){return y(t)},w.createInstance=function(t){return new w(t)};const C=w.createInstance({driver:"localStorage",keyPrefix:"barcode-scanner/"}),B=(t,e)=>{if("function"!=typeof t)throw new TypeError("Expected a function for first argument");if("number"!=typeof e)throw new TypeError("Expected a number for second argument");return(...o)=>{const n=e>0?e:0;return t(...o.slice(0,n))}},S=document.getElementById("toastContainer"),k=t=>{const e=t.currentTarget;e.removeEventListener("click",k),S.removeChild(e.parentNode)},M=(t="",e="info")=>{["info","warning","danger"].includes(e)||(e="info");const o=`\n    ${t}\n    <button type="button" class="close" data-dismiss="alert" aria-label="Close">\n      <span aria-hidden="true">&times;</span>\n    </button>\n  `,n=document.createElement("div");n.className=`alert alert-${e} alert-dismissible text-break mb-2 fade`,n.innerHTML=o,n.querySelector("button").addEventListener("click",k),S.appendChild(n),setTimeout((()=>n.classList.add("show")),100)};!async function(){const t=["image/jpg","image/jpeg","image/png","image/apng","image/gif","image/webp","image/avif"],e=document.querySelector("capture-photo"),o=document.getElementById("cameraResults"),n=document.getElementById("fileResults"),i=document.getElementById("scanInstructions"),r=document.getElementById("scanBtn"),s=document.getElementById("scanMethod"),c=document.getElementById("fileInput"),d=document.getElementById("dropzone"),u=document.getElementById("cameraView"),l=document.getElementById("fileView"),h=document.querySelector("resize-observer"),m=document.getElementById("scanFrame"),p=document.getElementById("settingsBtn"),g=document.getElementById("settingsDialog"),b=document.forms["settings-form"],v=C.getItem("settings");let f,_=!0;const y=(()=>{const t=new(window.AudioContext||window.webkitAudioContext||window.audioContext);if(t)return(e,o,n,i,r)=>{var s;if(!(null===(s=C.getItem("settings"))||void 0===s?void 0:s.beep))return;const a=t.createOscillator(),c=t.createGain();a.connect(c),c.connect(t.destination),n&&(c.gain.value=n),o&&(a.frequency.value=o),i&&(a.type=i),"function"==typeof r&&(a.onended=r),a.start(t.currentTime),a.stop(t.currentTime+(e||500)/1e3)}})();function E(t=200){var e;if("function"==typeof window.navigator.vibrate&&(null===(e=C.getItem("settings"))||void 0===e?void 0:e.vibrate))try{window.navigator.vibrate(t)}catch{}}function w(t){if(!t)return;const e=t.getBoundingClientRect();m.style.cssText=`width: ${e.width}px; height: ${e.height}px`}if(e.addEventListener("capture-photo:video-play",(t=>{m.hidden=!1,w(t.detail.video),T()}),{once:!0}),a.defineCustomElement(),!("BarcodeDetector"in window))return u.hidden=!0,l.hidden=!0,s.hidden=!0,void M("BarcodeDetector API is not supported by your browser.","danger");c.accept=t.join(",");const S=e.shadowRoot.querySelector("video"),k=new window.BarcodeDetector({formats:await window.BarcodeDetector.getSupportedFormats()});function O(t){t.querySelectorAll(".results__item").forEach((t=>t.remove()))}function A(t,e){if(!t)return;let o;try{var n;new URL(t),o=document.createElement("a"),o.href=t,o.setAttribute("target","_blank"),o.setAttribute("rel","noreferrer noopener"),(null===(n=C.getItem("settings"))||void 0===n?void 0:n.openWebPage)&&o.click()}catch(t){o=document.createElement("span")}o.className="results__item",o.textContent=t,e.appendChild(o);const i=e.querySelector("clipboard-copy");i&&(i.disabled="-"===t)}function L(t){return new Promise(((e,o)=>{k.detect(t).then((t=>{Array.isArray(t)&&t.length>0?e(t[0]):o({message:"Could not detect barcode from provided source."})})).catch((t=>{o(t)}))}))}async function T(){i.hidden=!1;try{const t=await L(S);return window.cancelAnimationFrame(f),O(o),A(t.rawValue,o),i.hidden=!0,r.hidden=!1,m.hidden=!0,y(200,860,.03,"square"),void E()}catch(t){}_&&(f=window.requestAnimationFrame(B(T,0)))}function P(t){const e=new Image,o=new FileReader;o.addEventListener("load",(t=>{const o=t.target.result;e.addEventListener("load",(async()=>{try{const t=await L(e);O(n),A(t.rawValue,n),y(200,860,.03,"square"),E()}catch(t){O(n),A("-",n)}})),e.src=o,d.querySelectorAll("img").forEach((t=>t.remove())),d.prepend(e)})),t&&o.readAsDataURL(t)}v&&Object.entries(v).forEach((([t,e])=>{const o=b.querySelector(`[name="${t}"]`);o&&(o.checked=e)})),document.addEventListener("capture-photo:error",(t=>{e.hidden=!0,u.hidden=!0,l.hidden=!1,s.hidden=!0;const o=t.detail.error;if("NotFoundError"===o.name)return;const n="NotAllowedError"===o.name?"Permission to use webcam was denied. Reload the page to give appropriate permissions to webcam.":o.message;M(n,"danger")}),{once:!0}),r.addEventListener("click",(()=>{r.hidden=!0,m.hidden=!1,O(o),T()})),s.addEventListener("change",(t=>{const n=t.target.value;[u,l].forEach((t=>{t.hidden=t.id!==n})),"cameraView"===n&&(_=!0,e.hidden||e.loading||o.querySelector(".results__item")||T()),"fileView"===n&&(_=!1)})),c.addEventListener("change",(t=>{P(t.target.files[0])})),d.addEventListener("dragover",(t=>{t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"})),d.addEventListener("drop",(e=>{e.stopPropagation(),e.preventDefault();const o=e.dataTransfer.files,[n]=o;n&&t.includes(n.type)&&(c.value=c.defaultValue,P(n))})),h.addEventListener("resize-observer:resize",(()=>{w(e.shadowRoot.querySelector("video"))})),p.addEventListener("click",(()=>{g.showModal()})),g.addEventListener("click",(t=>{t.target===t.currentTarget&&g.close()})),b.addEventListener("change",(t=>{const e={};t.currentTarget.querySelectorAll('input[type="checkbox"]').forEach((t=>e[t.name]=t.checked)),C.setItem("settings",e)}))}()}();
//# sourceMappingURL=index.d117f387.js.map
