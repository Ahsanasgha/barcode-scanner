{"mappings":"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","sources":["node_modules/@georapbox/capture-photo-element/dist/capture-photo.min.js","src/js/toast-alert.js","src/js/index.js"],"sourcesContent":["/*!\n * @georapbox/capture-photo-element\n * A custom element that implements the MediaDevices.getUserMedia() method of the MediaDevices interface to capture a photo in the browser.\n *\n * @version v1.3.1\n * @author George Raptis <georapbox@gmail.com>\n * @homepage https://github.com/georapbox/capture-photo-element#readme\n * @repository git+https://github.com/georapbox/capture-photo-element.git\n * @license MIT\n */\nconst t=document.createElement(\"template\");t.innerHTML='\\n  <style>\\n    :host {\\n      all: initial;\\n      display: block;\\n      box-sizing: border-box;\\n    }\\n    :host *,\\n    :host *::before,\\n    :host *::after {\\n      box-sizing: inherit;\\n    }\\n    :host video {\\n      display: block;\\n    }\\n    :host #output:empty {\\n      display: none;\\n    }\\n    [hidden] {\\n      display: none !important;\\n    }\\n  </style>\\n  <video part=\"video\" playsinline></video>\\n  <canvas hidden></canvas>\\n  <div part=\"actions-container\">\\n    <slot name=\"capture-button\">\\n      <button part=\"capture-button\" type=\"button\"><slot name=\"capture-button-content\">Capture photo</slot></button>\\n    </slot>\\n    <slot name=\"facing-mode-button\"><button part=\"facing-mode-button\" type=\"button\"><slot name=\"facing-mode-button-content\">Toggle facing mode</slot></button></slot>\\n  </div>\\n  <div part=\"output-container\" id=\"output\"></div>\\n';class e extends HTMLElement{constructor(){super(),this._connected=!1,this._supportedConstraints=e.isSupported()?navigator.mediaDevices.getSupportedConstraints():{},this.shadowRoot||(this.attachShadow({mode:\"open\"}),this.shadowRoot.appendChild(t.content.cloneNode(!0))),this._onFacingModeButtonClick=this._onFacingModeButtonClick.bind(this),this._onCapturePhotoButtonClick=this._onCapturePhotoButtonClick.bind(this),this._onVideoLoadedMetaData=this._onVideoLoadedMetaData.bind(this),this._onCaptureButtonSlotChange=this._onCaptureButtonSlotChange.bind(this),this._onFacingModeButtonSlotChange=this._onFacingModeButtonSlotChange.bind(this)}connectedCallback(){if(this._connected=!0,this._canvasElement=this.shadowRoot.querySelector(\"canvas\"),this._outputElement=this.shadowRoot.getElementById(\"output\"),this._videoElement=this.shadowRoot.querySelector(\"video\"),this._videoElement&&this._videoElement.addEventListener(\"loadedmetadata\",this._onVideoLoadedMetaData),this._captureButtonSlot=this.shadowRoot.querySelector('slot[name=\"capture-button\"]'),this._captureButtonSlot&&this._captureButtonSlot.addEventListener(\"slotchange\",this._onCaptureButtonSlotChange),this._captureButton=this._getCaptureButton(),this._captureButton&&this._captureButton.addEventListener(\"click\",this._onCapturePhotoButtonClick),this._facingModeButtonSlot=this.shadowRoot.querySelector('slot[name=\"facing-mode-button\"]'),this._facingModeButtonSlot&&this._facingModeButtonSlot.addEventListener(\"slotchange\",this._onFacingModeButtonSlotChange),this._facingModeButton=this._getFacingModeButton(),this._facingModeButton&&(this._supportedConstraints.facingMode?this._facingModeButton.addEventListener(\"click\",this._onFacingModeButtonClick):this._facingModeButton.hidden=!0),this._upgradeProperty(\"outputDisabled\"),this._upgradeProperty(\"facingMode\"),this._upgradeProperty(\"cameraResolution\"),this._upgradeProperty(\"zoom\"),!e.isSupported())return this.dispatchEvent(new CustomEvent(\"capture-photo:error\",{bubbles:!0,composed:!0,detail:{error:{name:\"NotSupportedError\",message:\"Not supported\"}}}));this._requestGetUserMedia()}disconnectedCallback(){this._stopVideoStreaming(),this._facingModeButton&&this._facingModeButton.removeEventListener(\"click\",this._onFacingModeButtonClick),this._captureButton&&this._captureButton.removeEventListener(\"click\",this._onCapturePhotoButtonClick),this._videoElement&&this._videoElement.removeEventListener(\"canplay\",this._onVideoLoadedMetaData),this._captureButtonSlot&&this._captureButtonSlot.removeEventListener(\"slotchange\",this._onCaptureButtonSlotChange),this._facingModeButtonSlot&&this._facingModeButtonSlot.removeEventListener(\"slotchange\",this._onFacingModeButtonSlotChange)}attributeChangedCallback(t,e,o){this._connected&&(\"output-disabled\"===t&&this._emptyOutputElement(),\"facing-mode\"===t&&this._supportedConstraints.facingMode&&e!==o&&(this._stopVideoStreaming(),this._requestGetUserMedia(),this.dispatchEvent(new CustomEvent(\"capture-photo:facing-mode-change\",{bubbles:!0,composed:!0,detail:{facingMode:o}}))),\"camera-resolution\"===t&&e!==o&&(this._stopVideoStreaming(),this._requestGetUserMedia(),this.dispatchEvent(new CustomEvent(\"capture-photo:camera-resolution-change\",{bubbles:!0,composed:!0,detail:{cameraResolution:o}}))),\"zoom\"===t&&e!==o&&(this._applyZoom(this.zoom),this.dispatchEvent(new CustomEvent(\"capture-photo:zoom-change\",{bubbles:!0,composed:!0,detail:{zoom:this.zoom}}))))}static get observedAttributes(){return[\"output-disabled\",\"facing-mode\",\"camera-resolution\",\"zoom\"]}get outputDisabled(){return this.hasAttribute(\"output-disabled\")}set outputDisabled(t){t?this.setAttribute(\"output-disabled\",\"\"):this.removeAttribute(\"output-disabled\")}get facingMode(){return this.getAttribute(\"facing-mode\")}set facingMode(t){this.setAttribute(\"facing-mode\",t)}get cameraResolution(){return this.getAttribute(\"camera-resolution\")}set cameraResolution(t){this.setAttribute(\"camera-resolution\",t)}get zoom(){return Number(this.getAttribute(\"zoom\"))||null}set zoom(t){const e=Number(t)||0;this.setAttribute(\"zoom\",e>0?Math.floor(e):0)}get loading(){return this.hasAttribute(\"loading\")}_stopVideoStreaming(){if(!this._videoElement||!this._stream)return;const[t]=this._stream.getVideoTracks();t&&t.stop(),this._videoElement.srcObject=null,this._stream=null}_requestGetUserMedia(){if(!e.isSupported())return;this.setAttribute(\"loading\",\"\");const t={video:{facingMode:{ideal:this.facingMode||\"user\"}},audio:!1};if(\"string\"==typeof this.cameraResolution){const[e,o]=this.cameraResolution.split(\"x\");t.video.width=e,t.video.height=o}navigator.mediaDevices.getUserMedia(t).then((t=>{this._videoElement.srcObject=t,this._stream=t,this._applyZoom(this.zoom)})).catch((t=>{this.dispatchEvent(new CustomEvent(\"capture-photo:error\",{bubbles:!0,composed:!0,detail:{error:t}}))})).finally((()=>{this.removeAttribute(\"loading\")}))}capture(){if(!this.loading)try{const t=this._canvasElement.getContext(\"2d\"),e=this._videoElement.videoWidth,o=this._videoElement.videoHeight;this._canvasElement.width=e,this._canvasElement.height=o,t.drawImage(this._videoElement,0,0,e,o);const n=this._canvasElement.toDataURL(\"image/png\");if(\"string\"==typeof n&&n.includes(\"data:image\")){if(!this.outputDisabled){const t=new Image;t.src=n,t.width=e,t.height=o,t.part=\"output-image\",this._emptyOutputElement(),this._outputElement&&this._outputElement.appendChild(t)}this.dispatchEvent(new CustomEvent(\"capture-photo:success\",{bubbles:!0,composed:!0,detail:{dataURI:n,width:e,height:o}}))}}catch(t){this.dispatchEvent(new CustomEvent(\"capture-photo:error\",{bubbles:!0,composed:!0,detail:{error:t}}))}}_onFacingModeButtonClick(t){t.preventDefault(),this.loading||(this.facingMode=\"user\"!==this.facingMode&&this.facingMode?\"user\":\"environment\")}_onCapturePhotoButtonClick(t){t.preventDefault(),this.capture()}_onVideoLoadedMetaData(t){const e=t.target;e.play().then((()=>{this.dispatchEvent(new CustomEvent(\"capture-photo:video-play\",{bubbles:!0,composed:!0,detail:{video:e}}))})).catch((t=>{this.dispatchEvent(new CustomEvent(\"capture-photo:error\",{bubbles:!0,composed:!0,detail:{error:t}}))})).finally((()=>{this.removeAttribute(\"loading\")}))}_emptyOutputElement(){this._outputElement&&Array.from(this._outputElement.childNodes).forEach((t=>t.remove()))}_applyZoom(t){if(!this._stream||!t)return;const[e]=this._stream.getVideoTracks();if(\"function\"!=typeof e.getCapabilities||\"function\"!=typeof e.getSettings)return;const o=e.getCapabilities();var n,i,s;\"zoom\"in e.getSettings()&&e.applyConstraints({advanced:[{zoom:(n=Number(t),i=o.zoom.min,s=o.zoom.max,Number.isNaN(i)&&(i=0),Number.isNaN(s)&&(s=0),Math.min(Math.max(n,Math.min(i,s)),Math.max(i,s)))}]})}_onCaptureButtonSlotChange(t){t.target&&\"capture-button\"===t.target.name&&(this._captureButton&&this._captureButton.removeEventListener(\"click\",this._onCapturePhotoButtonClick),this._captureButton=this._getCaptureButton(),this._captureButton&&(this._captureButton.addEventListener(\"click\",this._onCapturePhotoButtonClick),\"BUTTON\"===this._captureButton.nodeName||this._captureButton.hasAttribute(\"role\")||this._captureButton.setAttribute(\"role\",\"button\")))}_onFacingModeButtonSlotChange(t){t.target&&\"facing-mode-button\"===t.target.name&&(this._facingModeButton&&this._facingModeButton.removeEventListener(\"click\",this._onFacingModeButtonClick),this._facingModeButton=this._getFacingModeButton(),this._facingModeButton&&(this._facingModeButton.addEventListener(\"click\",this._onFacingModeButtonClick),\"BUTTON\"===this._facingModeButton.nodeName||this._facingModeButton.hasAttribute(\"role\")||this._facingModeButton.setAttribute(\"role\",\"button\")))}_getFacingModeButton(){return this._facingModeButtonSlot?this._facingModeButtonSlot.assignedElements({flatten:!0}).find((t=>\"BUTTON\"===t.nodeName||\"facing-mode-button\"===t.getAttribute(\"slot\"))):null}_getCaptureButton(){return this._captureButtonSlot?this._captureButtonSlot.assignedElements({flatten:!0}).find((t=>\"BUTTON\"===t.nodeName||\"capture-button\"===t.getAttribute(\"slot\"))):null}_upgradeProperty(t){if(Object.prototype.hasOwnProperty.call(this,t)){const e=this[t];delete this[t],this[t]=e}}static isSupported(){return Boolean(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)}static defineCustomElement(t=\"capture-photo\"){\"undefined\"==typeof window||window.customElements.get(t)||window.customElements.define(t,e)}}export{e as CapturePhoto};\n","const toastContainer = document.getElementById('toastContainer');\n\nconst hideAlert = evt => {\n  const target = evt.currentTarget;\n  target.removeEventListener('click', hideAlert);\n  toastContainer.removeChild(target.parentNode);\n};\n\nexport const toastAlert = (message = '', type = 'info') => {\n  const types = ['info', 'warning', 'danger'];\n\n  if (!types.includes(type)) {\n    type = 'info';\n  }\n\n  const template = /* html */`\n    ${message}\n    <button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  `;\n\n  const div = document.createElement('div');\n  div.className = `alert alert-${type} alert-dismissible text-break mb-2 fade`;\n  div.innerHTML = template;\n  div.querySelector('button').addEventListener('click', hideAlert);\n  toastContainer.appendChild(div);\n  setTimeout(() => div.classList.add('show'), 100);\n};\n","import { CapturePhoto } from '@georapbox/capture-photo-element/dist/capture-photo.min.js';\nimport { toastAlert } from './toast-alert.js';\n\n(async function () {\n  const ACCEPTED_MIME_TYPES = ['image/jpg', 'image/jpeg', 'image/png', 'image/apng', 'image/gif', 'image/webp', 'image/avif'];\n  const capturePhotoEl = document.querySelector('capture-photo');\n  const cameraResultsEl = document.getElementById('cameraResults');\n  const fileResultsEl = document.getElementById('fileResults');\n  const scanningEl = document.querySelector('.scanning');\n  const scanBtn = document.getElementById('scanBtn');\n  const scanMethodSelect = document.getElementById('scanMethod');\n  const fileInput = document.getElementById('fileInput');\n  const dropzoneEl = document.getElementById('dropzone');\n  const cameraViewEl = document.getElementById('cameraView');\n  const fileViewEl = document.getElementById('fileView');\n  let videoLoadedFirstTime = false;\n  let shouldRepeatScan = true;\n  let rafId;\n\n  if (!('BarcodeDetector' in window)) {\n    cameraViewEl.hidden = true;\n    fileViewEl.hidden = true;\n    scanMethodSelect.hidden = true;\n    toastAlert('BarcodeDetector API is not supported by your browser.', 'danger');\n    return;\n  }\n\n  fileInput.accept = ACCEPTED_MIME_TYPES.join(',');\n\n  document.addEventListener('capture-photo:error', evt => {\n    capturePhotoEl.hidden = true;\n    scanMethodSelect.querySelector('option[value=\"cameraView\"]').remove();\n    scanMethodSelect.querySelector('option[value=\"fileView\"]').selected = true;\n    scanMethodSelect.dispatchEvent(new Event('change'));\n\n    const error = evt.detail.error;\n\n    if (error.name === 'NotFoundError') {\n      return;\n    }\n\n    const errorMessage = error.name === 'NotAllowedError' ? 'Permission to use webcam was denied. Reload the page to give appropriate permissions to webcam.' : error.message;\n\n    toastAlert(errorMessage, 'danger');\n  });\n\n  capturePhotoEl.addEventListener('capture-photo:video-play', () => {\n    if (!videoLoadedFirstTime && !cameraViewEl.hidden) {\n      scan();\n    }\n\n    videoLoadedFirstTime = true;\n  });\n\n  CapturePhoto.defineCustomElement();\n\n  const capturePhotoVideoEl = capturePhotoEl.shadowRoot.querySelector('video');\n\n  const barcodeDetector = new window.BarcodeDetector({\n    formats: await window.BarcodeDetector.getSupportedFormats()\n  });\n\n  function emptyResults(el) {\n    el.querySelectorAll('.results__item').forEach(el => el.remove());\n  }\n\n  function createResult(value, resultEl) {\n    if (!value) {\n      return;\n    }\n\n    let el;\n\n    try {\n      new URL(value);\n      el = document.createElement('a');\n      el.href = value;\n      el.setAttribute('target', '_blank');\n      el.setAttribute('rel', 'noreferrer noopener');\n    } catch (err) {\n      el = document.createElement('span');\n    }\n\n    el.className = 'results__item';\n    el.textContent = value;\n\n    resultEl.appendChild(el);\n  }\n\n  function detectBarcode(source) {\n    return new Promise((resolve, reject) => {\n      barcodeDetector.detect(source).then(results => {\n        if (Array.isArray(results) && results.length > 0) {\n          resolve(results[0]);\n        } else {\n          reject({\n            message: 'Could not detect barcode from provided source.'\n          });\n        }\n      }).catch(err => {\n        reject(err);\n      });\n    });\n  }\n\n  async function scan() {\n    scanningEl.hidden = false;\n\n    try {\n      const barcode = await detectBarcode(capturePhotoVideoEl);\n      window.cancelAnimationFrame(rafId);\n      emptyResults(cameraResultsEl);\n      createResult(barcode.rawValue, cameraResultsEl);\n      scanningEl.hidden = true;\n      scanBtn.hidden = false;\n      return;\n    } catch (err) {\n      // Fail silently...\n    }\n\n    if (shouldRepeatScan) {\n      rafId = window.requestAnimationFrame(scan);\n    }\n  }\n\n  function handleFileSelect(file) {\n    const image = new Image();\n    const reader = new FileReader();\n\n    reader.addEventListener('load', evt => {\n      const data = evt.target.result;\n\n      image.addEventListener('load', async () => {\n        try {\n          const barcode = await detectBarcode(image);\n          emptyResults(fileResultsEl);\n          createResult(barcode.rawValue, fileResultsEl);\n        } catch (err) {\n          emptyResults(fileResultsEl);\n          createResult('-', fileResultsEl);\n        }\n      });\n\n      image.src = data;\n      dropzoneEl.querySelectorAll('img').forEach(el => el.remove());\n      dropzoneEl.prepend(image);\n    });\n\n    if (file) {\n      reader.readAsDataURL(file);\n    }\n  }\n\n  scanBtn.addEventListener('click', () => {\n    scanBtn.hidden = true;\n    emptyResults(cameraResultsEl);\n    scan();\n  });\n\n  scanMethodSelect.addEventListener('change', evt => {\n    const value = evt.target.value;\n\n    [cameraViewEl, fileViewEl].forEach(el => {\n      el.hidden = el.id !== value;\n    });\n\n    if (value === 'cameraView') {\n      shouldRepeatScan = true;\n\n      if (\n        !capturePhotoEl.hidden // Assumes that element is hidden because of error.\n        && !capturePhotoEl.loading\n        && !cameraResultsEl.querySelector('.results__item')\n      ) {\n        scan();\n      }\n    }\n\n    if (value === 'fileView') {\n      shouldRepeatScan = false;\n    }\n  });\n\n  fileInput.addEventListener('change', evt => {\n    const file = evt.target.files[0];\n    handleFileSelect(file);\n  });\n\n  dropzoneEl.addEventListener('dragover', evt => {\n    evt.stopPropagation();\n    evt.preventDefault();\n    evt.dataTransfer.dropEffect = 'copy';\n  });\n\n  dropzoneEl.addEventListener('drop', evt => {\n    evt.stopPropagation();\n    evt.preventDefault();\n\n    const fileList = evt.dataTransfer.files;\n    const [file] = fileList;\n\n    if (!file || !ACCEPTED_MIME_TYPES.includes(file.type)) {\n      return;\n    }\n\n    fileInput.value = fileInput.defaultValue;\n\n    handleFileSelect(file);\n  });\n}());\n"],"names":["$1aa3411f32e58366$var$t","document","createElement","innerHTML","$1aa3411f32e58366$export$cc30a98fe3890794","HTMLElement","connectedCallback","this","_connected","_canvasElement","shadowRoot","querySelector","_outputElement","getElementById","_videoElement","addEventListener","_onVideoLoadedMetaData","_captureButtonSlot","_onCaptureButtonSlotChange","_captureButton","_getCaptureButton","_onCapturePhotoButtonClick","_facingModeButtonSlot","_onFacingModeButtonSlotChange","_facingModeButton","_getFacingModeButton","_supportedConstraints","facingMode","_onFacingModeButtonClick","hidden","_upgradeProperty","isSupported","dispatchEvent","CustomEvent","bubbles","composed","detail","error","name","message","_requestGetUserMedia","disconnectedCallback","_stopVideoStreaming","removeEventListener","attributeChangedCallback","t","e","o","_emptyOutputElement","cameraResolution","_applyZoom","zoom","observedAttributes","outputDisabled","hasAttribute","setAttribute","removeAttribute","getAttribute","Number","Math","floor","loading","_stream","getVideoTracks","stop","srcObject","video","ideal","audio","e1","split","width","height","navigator","mediaDevices","getUserMedia","then","catch","finally","capture","getContext","videoWidth","videoHeight","drawImage","n","toDataURL","includes","t1","Image","src","part","appendChild","dataURI","t2","preventDefault","target","play","Array","from","childNodes","forEach","remove","getCapabilities","getSettings","i","s","applyConstraints","advanced","min","max","isNaN","nodeName","assignedElements","flatten","find","Object","prototype","hasOwnProperty","call","static","Boolean","window","customElements","get","define","constructor","super","getSupportedConstraints","attachShadow","mode","content","cloneNode","bind","$3969451ff60cb8d5$var$toastContainer","$3969451ff60cb8d5$var$hideAlert","evt","currentTarget","removeChild","parentNode","$3969451ff60cb8d5$export$af04143326425dbd","type","template","div","className","setTimeout","classList","add","ACCEPTED_MIME_TYPES","capturePhotoEl","cameraResultsEl","fileResultsEl","scanningEl","scanBtn","scanMethodSelect","fileInput","dropzoneEl","cameraViewEl","fileViewEl","rafId","videoLoadedFirstTime","shouldRepeatScan","accept","join","selected","Event","errorMessage","scan","defineCustomElement","capturePhotoVideoEl","barcodeDetector","BarcodeDetector","formats","getSupportedFormats","emptyResults","el","querySelectorAll","createResult","value","resultEl","URL","href","err","textContent","detectBarcode","source","Promise","resolve","reject","detect","results","isArray","length","async","barcode","cancelAnimationFrame","rawValue","requestAnimationFrame","handleFileSelect","file","image","reader","FileReader","data","result","prepend","readAsDataURL","id","files","stopPropagation","dataTransfer","dropEffect","fileList","defaultValue"],"version":3,"file":"index.aae72b6f.js.map"}