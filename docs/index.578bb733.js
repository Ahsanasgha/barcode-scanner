!function(){
/*!
 * @georapbox/clipboard-copy-element
 * A custom element that implements the Clipboard API to copy text content from elements or input values to the clipboard.
 *
 * @version v1.0.2
 * @author George Raptis <georapbox@gmail.com>
 * @homepage https://github.com/georapbox/clipboard-copy-element#readme
 * @repository git+https://github.com/georapbox/clipboard-copy-element.git
 * @license MIT
 */
const t=document.createElement("template"),e=String.raw;t.innerHTML=e`
  <slot name="button"><button type="button" part="button"><slot name="button-content">Copy</slot></button></slot>
`;class o extends HTMLElement{static get observedAttributes(){return["disabled"]}connectedCallback(){this._buttonSlot&&this._buttonSlot.addEventListener("slotchange",this._onSlotChange),this.$button&&this.$button.addEventListener("click",this._onClick),this._upgradeProperty("value"),this._upgradeProperty("from"),this._upgradeProperty("disabled")}disconnectedCallback(){this._buttonSlot.removeEventListener("slotchange",this._onSlotChange),this.$button&&this.$button.removeEventListener("click",this._onClick)}attributeChangedCallback(t){"disabled"===t&&this.$button&&(this.$button.disabled=this.disabled,this.$button.setAttribute("aria-disabled",this.disabled),this.$button.part&&this.$button.part.contains("button")&&this.$button.part.toggle("button--disabled",this.disabled))}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get value(){return this.getAttribute("value")}set value(t){this.setAttribute("value",t)}get from(){return this.getAttribute("from")}set from(t){this.setAttribute("from",t)}async _copy(){if(this.value||this.from)try{let t="";if(this.value)t=this.value;else if(this.from){const e=("getRootNode"in Element.prototype?this.$button.getRootNode({composed:!0}):this.$button.ownerDocument).querySelector(this.from);if(!e)return;t=e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement?e.value:e instanceof HTMLAnchorElement&&e.hasAttribute("href")?e.href:e.textContent}await navigator.clipboard.writeText(t),this.dispatchEvent(new CustomEvent("clipboard-copy:success",{bubbles:!0,composed:!0,detail:{value:t}}))}catch(t){this.dispatchEvent(new CustomEvent("clipboard-copy:error",{bubbles:!0,composed:!0,detail:{error:t}}))}}_getButton(){return this._buttonSlot?this._buttonSlot.assignedElements({flatten:!0}).find((t=>"BUTTON"===t.nodeName||"button"===t.getAttribute("slot"))):null}_onClick(t){t.preventDefault(),this.disabled||(this.dispatchEvent(new Event("clipboard-copy:click",{bubbles:!0,composed:!0})),this._copy())}_onSlotChange(t){t.target&&"button"===t.target.name&&(this.$button&&this.$button.removeEventListener("click",this._onClick),this.$button=this._getButton(),this.$button&&(this.$button.addEventListener("click",this._onClick),"BUTTON"===this.$button.nodeName||this.$button.hasAttribute("role")||this.$button.setAttribute("role","button")))}_upgradeProperty(t){if(Object.prototype.hasOwnProperty.call(this,t)){const e=this[t];delete this[t],this[t]=e}}static defineCustomElement(t="clipboard-copy"){"undefined"==typeof window||window.customElements.get(t)||window.customElements.define(t,o)}constructor(){super(),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(t.content.cloneNode(!0))),this._buttonSlot=this.shadowRoot.querySelector('slot[name="button"]'),this.$button=this._getButton(),this._onClick=this._onClick.bind(this),this._onSlotChange=this._onSlotChange.bind(this)}}o.defineCustomElement();
/*!
 * @georapbox/resize-observer-element
 * A custom element that offers a declarative interface to the ResizeObserver API.
 *
 * @version v1.0.1
 * @author George Raptis <georapbox@gmail.com>
 * @homepage https://github.com/georapbox/resize-observer-element#readme
 * @repository git+https://github.com/georapbox/resize-observer-element.git
 * @license MIT
 */
const n=document.createElement("template"),i=String.raw;n.innerHTML=i`
  <style>:host { display: contents; }</style>
  <slot></slot>
`;class s extends HTMLElement{static get observedAttributes(){return["disabled"]}attributeChangedCallback(t,e,o){"disabled"===t&&e!==o&&(this.disabled?this._stopObserver():this._startObserver())}connectedCallback(){"ResizeObserver"in window&&(this._resizeObserver=new ResizeObserver((t=>{this.dispatchEvent(new CustomEvent("resize-observer:resize",{bubbles:!0,composed:!0,detail:{entries:t}}))})),this.disabled||this._startObserver(),this._slot.addEventListener("slotchange",this._onSlotChange))}disconnectedCallback(){this._stopObserver(),this._slot.removeEventListener("slotchange",this._onSlotChange)}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}_startObserver(){this._slot&&this._resizeObserver&&(this._observedElements.forEach((t=>this._resizeObserver.unobserve(t))),this._observedElements=[],this._slot.assignedElements().forEach((t=>{this._resizeObserver.observe(t),this._observedElements.push(t)})))}_stopObserver(){this._resizeObserver&&this._resizeObserver.disconnect()}_onSlotChange(){this.disabled||this._startObserver()}_upgradeProperty(t){if(Object.prototype.hasOwnProperty.call(this,t)){const e=this[t];delete this[t],this[t]=e}}static defineCustomElement(t="resize-observer"){"undefined"==typeof window||window.customElements.get(t)||window.customElements.define(t,s)}constructor(){super(),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(n.content.cloneNode(!0))),this._slot=this.shadowRoot.querySelector("slot"),this._resizeObserver=null,this._observedElements=[],this._onSlotChange=this._onSlotChange.bind(this),this._upgradeProperty("disabled")}}s.defineCustomElement();
/*!
 * @georapbox/capture-photo-element
 * A custom element that implements the MediaDevices.getUserMedia() method of the MediaDevices interface to capture a photo in the browser.
 *
 * @version v1.3.1
 * @author George Raptis <georapbox@gmail.com>
 * @homepage https://github.com/georapbox/capture-photo-element#readme
 * @repository git+https://github.com/georapbox/capture-photo-element.git
 * @license MIT
 */
const a=document.createElement("template");a.innerHTML='\n  <style>\n    :host {\n      all: initial;\n      display: block;\n      box-sizing: border-box;\n    }\n    :host *,\n    :host *::before,\n    :host *::after {\n      box-sizing: inherit;\n    }\n    :host video {\n      display: block;\n    }\n    :host #output:empty {\n      display: none;\n    }\n    [hidden] {\n      display: none !important;\n    }\n  </style>\n  <video part="video" playsinline></video>\n  <canvas hidden></canvas>\n  <div part="actions-container">\n    <slot name="capture-button">\n      <button part="capture-button" type="button"><slot name="capture-button-content">Capture photo</slot></button>\n    </slot>\n    <slot name="facing-mode-button"><button part="facing-mode-button" type="button"><slot name="facing-mode-button-content">Toggle facing mode</slot></button></slot>\n  </div>\n  <div part="output-container" id="output"></div>\n';class r extends HTMLElement{connectedCallback(){if(this._connected=!0,this._canvasElement=this.shadowRoot.querySelector("canvas"),this._outputElement=this.shadowRoot.getElementById("output"),this._videoElement=this.shadowRoot.querySelector("video"),this._videoElement&&this._videoElement.addEventListener("loadedmetadata",this._onVideoLoadedMetaData),this._captureButtonSlot=this.shadowRoot.querySelector('slot[name="capture-button"]'),this._captureButtonSlot&&this._captureButtonSlot.addEventListener("slotchange",this._onCaptureButtonSlotChange),this._captureButton=this._getCaptureButton(),this._captureButton&&this._captureButton.addEventListener("click",this._onCapturePhotoButtonClick),this._facingModeButtonSlot=this.shadowRoot.querySelector('slot[name="facing-mode-button"]'),this._facingModeButtonSlot&&this._facingModeButtonSlot.addEventListener("slotchange",this._onFacingModeButtonSlotChange),this._facingModeButton=this._getFacingModeButton(),this._facingModeButton&&(this._supportedConstraints.facingMode?this._facingModeButton.addEventListener("click",this._onFacingModeButtonClick):this._facingModeButton.hidden=!0),this._upgradeProperty("outputDisabled"),this._upgradeProperty("facingMode"),this._upgradeProperty("cameraResolution"),this._upgradeProperty("zoom"),!r.isSupported())return this.dispatchEvent(new CustomEvent("capture-photo:error",{bubbles:!0,composed:!0,detail:{error:{name:"NotSupportedError",message:"Not supported"}}}));this._requestGetUserMedia()}disconnectedCallback(){this._stopVideoStreaming(),this._facingModeButton&&this._facingModeButton.removeEventListener("click",this._onFacingModeButtonClick),this._captureButton&&this._captureButton.removeEventListener("click",this._onCapturePhotoButtonClick),this._videoElement&&this._videoElement.removeEventListener("canplay",this._onVideoLoadedMetaData),this._captureButtonSlot&&this._captureButtonSlot.removeEventListener("slotchange",this._onCaptureButtonSlotChange),this._facingModeButtonSlot&&this._facingModeButtonSlot.removeEventListener("slotchange",this._onFacingModeButtonSlotChange)}attributeChangedCallback(t,e,o){this._connected&&("output-disabled"===t&&this._emptyOutputElement(),"facing-mode"===t&&this._supportedConstraints.facingMode&&e!==o&&(this._stopVideoStreaming(),this._requestGetUserMedia(),this.dispatchEvent(new CustomEvent("capture-photo:facing-mode-change",{bubbles:!0,composed:!0,detail:{facingMode:o}}))),"camera-resolution"===t&&e!==o&&(this._stopVideoStreaming(),this._requestGetUserMedia(),this.dispatchEvent(new CustomEvent("capture-photo:camera-resolution-change",{bubbles:!0,composed:!0,detail:{cameraResolution:o}}))),"zoom"===t&&e!==o&&(this._applyZoom(this.zoom),this.dispatchEvent(new CustomEvent("capture-photo:zoom-change",{bubbles:!0,composed:!0,detail:{zoom:this.zoom}}))))}static get observedAttributes(){return["output-disabled","facing-mode","camera-resolution","zoom"]}get outputDisabled(){return this.hasAttribute("output-disabled")}set outputDisabled(t){t?this.setAttribute("output-disabled",""):this.removeAttribute("output-disabled")}get facingMode(){return this.getAttribute("facing-mode")}set facingMode(t){this.setAttribute("facing-mode",t)}get cameraResolution(){return this.getAttribute("camera-resolution")}set cameraResolution(t){this.setAttribute("camera-resolution",t)}get zoom(){return Number(this.getAttribute("zoom"))||null}set zoom(t){const e=Number(t)||0;this.setAttribute("zoom",e>0?Math.floor(e):0)}get loading(){return this.hasAttribute("loading")}_stopVideoStreaming(){if(!this._videoElement||!this._stream)return;const[t]=this._stream.getVideoTracks();t&&t.stop(),this._videoElement.srcObject=null,this._stream=null}_requestGetUserMedia(){if(!r.isSupported())return;this.setAttribute("loading","");const t={video:{facingMode:{ideal:this.facingMode||"user"}},audio:!1};if("string"==typeof this.cameraResolution){const[e,o]=this.cameraResolution.split("x");t.video.width=e,t.video.height=o}navigator.mediaDevices.getUserMedia(t).then((t=>{this._videoElement.srcObject=t,this._stream=t,this._applyZoom(this.zoom)})).catch((t=>{this.dispatchEvent(new CustomEvent("capture-photo:error",{bubbles:!0,composed:!0,detail:{error:t}}))})).finally((()=>{this.removeAttribute("loading")}))}capture(){if(!this.loading)try{const t=this._canvasElement.getContext("2d"),e=this._videoElement.videoWidth,o=this._videoElement.videoHeight;this._canvasElement.width=e,this._canvasElement.height=o,t.drawImage(this._videoElement,0,0,e,o);const n=this._canvasElement.toDataURL("image/png");if("string"==typeof n&&n.includes("data:image")){if(!this.outputDisabled){const t=new Image;t.src=n,t.width=e,t.height=o,t.part="output-image",this._emptyOutputElement(),this._outputElement&&this._outputElement.appendChild(t)}this.dispatchEvent(new CustomEvent("capture-photo:success",{bubbles:!0,composed:!0,detail:{dataURI:n,width:e,height:o}}))}}catch(t){this.dispatchEvent(new CustomEvent("capture-photo:error",{bubbles:!0,composed:!0,detail:{error:t}}))}}_onFacingModeButtonClick(t){t.preventDefault(),this.loading||(this.facingMode="user"!==this.facingMode&&this.facingMode?"user":"environment")}_onCapturePhotoButtonClick(t){t.preventDefault(),this.capture()}_onVideoLoadedMetaData(t){const e=t.target;e.play().then((()=>{this.dispatchEvent(new CustomEvent("capture-photo:video-play",{bubbles:!0,composed:!0,detail:{video:e}}))})).catch((t=>{this.dispatchEvent(new CustomEvent("capture-photo:error",{bubbles:!0,composed:!0,detail:{error:t}}))})).finally((()=>{this.removeAttribute("loading")}))}_emptyOutputElement(){this._outputElement&&Array.from(this._outputElement.childNodes).forEach((t=>t.remove()))}_applyZoom(t){if(!this._stream||!t)return;const[e]=this._stream.getVideoTracks();if("function"!=typeof e.getCapabilities||"function"!=typeof e.getSettings)return;const o=e.getCapabilities();var n,i,s;"zoom"in e.getSettings()&&e.applyConstraints({advanced:[{zoom:(n=Number(t),i=o.zoom.min,s=o.zoom.max,Number.isNaN(i)&&(i=0),Number.isNaN(s)&&(s=0),Math.min(Math.max(n,Math.min(i,s)),Math.max(i,s)))}]})}_onCaptureButtonSlotChange(t){t.target&&"capture-button"===t.target.name&&(this._captureButton&&this._captureButton.removeEventListener("click",this._onCapturePhotoButtonClick),this._captureButton=this._getCaptureButton(),this._captureButton&&(this._captureButton.addEventListener("click",this._onCapturePhotoButtonClick),"BUTTON"===this._captureButton.nodeName||this._captureButton.hasAttribute("role")||this._captureButton.setAttribute("role","button")))}_onFacingModeButtonSlotChange(t){t.target&&"facing-mode-button"===t.target.name&&(this._facingModeButton&&this._facingModeButton.removeEventListener("click",this._onFacingModeButtonClick),this._facingModeButton=this._getFacingModeButton(),this._facingModeButton&&(this._facingModeButton.addEventListener("click",this._onFacingModeButtonClick),"BUTTON"===this._facingModeButton.nodeName||this._facingModeButton.hasAttribute("role")||this._facingModeButton.setAttribute("role","button")))}_getFacingModeButton(){return this._facingModeButtonSlot?this._facingModeButtonSlot.assignedElements({flatten:!0}).find((t=>"BUTTON"===t.nodeName||"facing-mode-button"===t.getAttribute("slot"))):null}_getCaptureButton(){return this._captureButtonSlot?this._captureButtonSlot.assignedElements({flatten:!0}).find((t=>"BUTTON"===t.nodeName||"capture-button"===t.getAttribute("slot"))):null}_upgradeProperty(t){if(Object.prototype.hasOwnProperty.call(this,t)){const e=this[t];delete this[t],this[t]=e}}static isSupported(){return Boolean(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)}static defineCustomElement(t="capture-photo"){"undefined"==typeof window||window.customElements.get(t)||window.customElements.define(t,r)}constructor(){super(),this._connected=!1,this._supportedConstraints=r.isSupported()?navigator.mediaDevices.getSupportedConstraints():{},this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(a.content.cloneNode(!0))),this._onFacingModeButtonClick=this._onFacingModeButtonClick.bind(this),this._onCapturePhotoButtonClick=this._onCapturePhotoButtonClick.bind(this),this._onVideoLoadedMetaData=this._onVideoLoadedMetaData.bind(this),this._onCaptureButtonSlotChange=this._onCaptureButtonSlotChange.bind(this),this._onFacingModeButtonSlotChange=this._onFacingModeButtonSlotChange.bind(this)}}const d=document.getElementById("toastContainer"),u=t=>{const e=t.currentTarget;e.removeEventListener("click",u),d.removeChild(e.parentNode)},c=(t="",e="info")=>{["info","warning","danger"].includes(e)||(e="info");const o=`\n    ${t}\n    <button type="button" class="close" data-dismiss="alert" aria-label="Close">\n      <span aria-hidden="true">&times;</span>\n    </button>\n  `,n=document.createElement("div");n.className=`alert alert-${e} alert-dismissible text-break mb-2 fade`,n.innerHTML=o,n.querySelector("button").addEventListener("click",u),d.appendChild(n),setTimeout((()=>n.classList.add("show")),100)},h=(t,e)=>{if("function"!=typeof t)throw new TypeError("Expected a function for first argument");if("number"!=typeof e)throw new TypeError("Expected a number for second argument");return(...o)=>{const n=e>0?e:0;return t(...o.slice(0,n))}};!async function(){const t=["image/jpg","image/jpeg","image/png","image/apng","image/gif","image/webp","image/avif"],e=document.querySelector("capture-photo"),o=document.getElementById("cameraResults"),n=document.getElementById("fileResults"),i=document.getElementById("scanInstructions"),s=document.getElementById("scanBtn"),a=document.getElementById("scanMethod"),d=document.getElementById("fileInput"),u=document.getElementById("dropzone"),l=document.getElementById("cameraView"),p=document.getElementById("fileView"),m=document.querySelector("resize-observer"),b=document.getElementById("scanFrame");let g,_=!0;const v=(()=>{const t=new(window.AudioContext||window.webkitAudioContext||window.audioContext);return(e,o,n,i,s)=>{const a=t.createOscillator(),r=t.createGain();a.connect(r),r.connect(t.destination),n&&(r.gain.value=n),o&&(a.frequency.value=o),i&&(a.type=i),"function"==typeof s&&(a.onended=s),a.start(t.currentTime),a.stop(t.currentTime+(e||500)/1e3)}})();function f(t){if(!t)return;const e=t.getBoundingClientRect();b.style.cssText=`width: ${e.width}px; height: ${e.height}px`}if(!("BarcodeDetector"in window))return l.hidden=!0,p.hidden=!0,a.hidden=!0,void c("BarcodeDetector API is not supported by your browser.","danger");d.accept=t.join(","),document.addEventListener("capture-photo:error",(t=>{e.hidden=!0,l.hidden=!0,p.hidden=!1,a.hidden=!0;const o=t.detail.error;if("NotFoundError"===o.name)return;const n="NotAllowedError"===o.name?"Permission to use webcam was denied. Reload the page to give appropriate permissions to webcam.":o.message;c(n,"danger")}),{once:!0}),e.addEventListener("capture-photo:video-play",(t=>{b.hidden=!1,f(t.detail.video),M()}),{once:!0}),r.defineCustomElement();const E=e.shadowRoot.querySelector("video"),w=new window.BarcodeDetector({formats:await window.BarcodeDetector.getSupportedFormats()});function C(t){t.querySelectorAll(".results__item").forEach((t=>t.remove()))}function y(t,e){if(!t)return;let o;try{new URL(t),o=document.createElement("a"),o.href=t,o.setAttribute("target","_blank"),o.setAttribute("rel","noreferrer noopener")}catch(t){o=document.createElement("span")}o.className="results__item",o.textContent=t,e.appendChild(o)}function B(t){return new Promise(((e,o)=>{w.detect(t).then((t=>{Array.isArray(t)&&t.length>0?e(t[0]):o({message:"Could not detect barcode from provided source."})})).catch((t=>{o(t)}))}))}async function M(){i.hidden=!1;try{const t=await B(E);return window.cancelAnimationFrame(g),C(o),y(t.rawValue,o),i.hidden=!0,s.hidden=!1,b.hidden=!0,void v(200,860,.03,"square")}catch(t){}_&&(g=window.requestAnimationFrame(h(M,0)))}function S(t){const e=new Image,o=new FileReader;o.addEventListener("load",(t=>{const o=t.target.result;e.addEventListener("load",(async()=>{try{const t=await B(e);C(n),y(t.rawValue,n)}catch(t){C(n),y("-",n)}})),e.src=o,u.querySelectorAll("img").forEach((t=>t.remove())),u.prepend(e)})),t&&o.readAsDataURL(t)}s.addEventListener("click",(()=>{s.hidden=!0,b.hidden=!1,C(o),M()})),a.addEventListener("change",(t=>{const n=t.target.value;[l,p].forEach((t=>{t.hidden=t.id!==n})),"cameraView"===n&&(_=!0,e.hidden||e.loading||o.querySelector(".results__item")||M()),"fileView"===n&&(_=!1)})),d.addEventListener("change",(t=>{S(t.target.files[0])})),u.addEventListener("dragover",(t=>{t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"})),u.addEventListener("drop",(e=>{e.stopPropagation(),e.preventDefault();const o=e.dataTransfer.files,[n]=o;n&&t.includes(n.type)&&(d.value=d.defaultValue,S(n))})),m.addEventListener("resize-observer:resize",(()=>{f(e.shadowRoot.querySelector("video"))}))}()}();
//# sourceMappingURL=index.578bb733.js.map
