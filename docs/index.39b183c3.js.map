{"mappings":"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","sources":["node_modules/@georapbox/capture-photo-element/dist/capture-photo.min.js","src/js/main.js"],"sourcesContent":["/*!\n * @georapbox/capture-photo-element\n * A custom element that implements the MediaDevices.getUserMedia() method of the MediaDevices interface to capture a photo in the browser.\n *\n * @version v1.3.0\n * @author George Raptis <georapbox@gmail.com>\n * @homepage https://github.com/georapbox/capture-photo-element#readme\n * @repository git+https://github.com/georapbox/capture-photo-element.git\n * @license MIT\n */\nconst t=document.createElement(\"template\");t.innerHTML='\\n  <style>\\n    :host {\\n      all: initial;\\n      display: block;\\n      box-sizing: border-box;\\n    }\\n    :host *,\\n    :host *::before,\\n    :host *::after {\\n      box-sizing: inherit;\\n    }\\n    :host video {\\n      display: block;\\n    }\\n    :host #output:empty {\\n      display: none;\\n    }\\n    [hidden] {\\n      display: none !important;\\n    }\\n  </style>\\n  <video part=\"video\" playsinline></video>\\n  <canvas hidden></canvas>\\n  <div part=\"actions-container\">\\n    <slot name=\"capture-button\">\\n      <button part=\"capture-button\" type=\"button\"><slot name=\"capture-button-content\">Capture photo</slot></button>\\n    </slot>\\n    <slot name=\"facing-mode-button\"><button part=\"facing-mode-button\" type=\"button\"><slot name=\"facing-mode-button-content\">Toggle facing mode</slot></button></slot>\\n  </div>\\n  <div part=\"output-container\" id=\"output\"></div>\\n';class e extends HTMLElement{constructor(){super(),this._supportedConstraints=e.isSupported()?navigator.mediaDevices.getSupportedConstraints():{},this.shadowRoot||(this.attachShadow({mode:\"open\"}),this.shadowRoot.appendChild(t.content.cloneNode(!0))),this._onFacingModeButtonClick=this._onFacingModeButtonClick.bind(this),this._onCapturePhotoButtonClick=this._onCapturePhotoButtonClick.bind(this),this._onVideoLoadedMetaData=this._onVideoLoadedMetaData.bind(this),this._onCaptureButtonSlotChange=this._onCaptureButtonSlotChange.bind(this),this._onFacingModeButtonSlotChange=this._onFacingModeButtonSlotChange.bind(this)}connectedCallback(){if(this._canvasElement=this.shadowRoot.querySelector(\"canvas\"),this._outputElement=this.shadowRoot.getElementById(\"output\"),this._videoElement=this.shadowRoot.querySelector(\"video\"),this._videoElement&&this._videoElement.addEventListener(\"loadedmetadata\",this._onVideoLoadedMetaData),this._captureButtonSlot=this.shadowRoot.querySelector('slot[name=\"capture-button\"]'),this._captureButtonSlot&&this._captureButtonSlot.addEventListener(\"slotchange\",this._onCaptureButtonSlotChange),this._captureButton=this._getCaptureButton(),this._captureButton&&this._captureButton.addEventListener(\"click\",this._onCapturePhotoButtonClick),this._facingModeButtonSlot=this.shadowRoot.querySelector('slot[name=\"facing-mode-button\"]'),this._facingModeButtonSlot&&this._facingModeButtonSlot.addEventListener(\"slotchange\",this._onFacingModeButtonSlotChange),this._facingModeButton=this._getFacingModeButton(),this._facingModeButton&&(this._supportedConstraints.facingMode?this._facingModeButton.addEventListener(\"click\",this._onFacingModeButtonClick):this._facingModeButton.hidden=!0),this._upgradeProperty(\"outputDisabled\"),this._upgradeProperty(\"facingMode\"),this._upgradeProperty(\"cameraResolution\"),this._upgradeProperty(\"zoom\"),!e.isSupported())return this.dispatchEvent(new CustomEvent(\"capture-photo:error\",{bubbles:!0,composed:!0,detail:{error:{name:\"NotSupportedError\",message:\"Not supported\"}}}));this._requestGetUserMedia()}disconnectedCallback(){this._stopVideoStreaming(),this._facingModeButton&&this._facingModeButton.removeEventListener(\"click\",this._onFacingModeButtonClick),this._captureButton&&this._captureButton.removeEventListener(\"click\",this._onCapturePhotoButtonClick),this._videoElement&&this._videoElement.removeEventListener(\"canplay\",this._onVideoLoadedMetaData),this._captureButtonSlot&&this._captureButtonSlot.removeEventListener(\"slotchange\",this._onCaptureButtonSlotChange),this._facingModeButtonSlot&&this._facingModeButtonSlot.removeEventListener(\"slotchange\",this._onFacingModeButtonSlotChange)}attributeChangedCallback(t,e,o){\"output-disabled\"===t&&this._emptyOutputElement(),\"facing-mode\"===t&&this._supportedConstraints.facingMode&&(this._stopVideoStreaming(),this._requestGetUserMedia(),this.dispatchEvent(new CustomEvent(\"capture-photo:facing-mode-change\",{bubbles:!0,composed:!0,detail:{facingMode:o}}))),\"camera-resolution\"===t&&(this._stopVideoStreaming(),this._requestGetUserMedia(),this.dispatchEvent(new CustomEvent(\"capture-photo:camera-resolution-change\",{bubbles:!0,composed:!0,detail:{cameraResolution:o}}))),\"zoom\"===t&&(this._applyZoom(this.zoom),this.dispatchEvent(new CustomEvent(\"capture-photo:zoom-change\",{bubbles:!0,composed:!0,detail:{zoom:this.zoom}})))}static get observedAttributes(){return[\"output-disabled\",\"facing-mode\",\"camera-resolution\",\"zoom\"]}get outputDisabled(){return this.hasAttribute(\"output-disabled\")}set outputDisabled(t){t?this.setAttribute(\"output-disabled\",\"\"):this.removeAttribute(\"output-disabled\")}get facingMode(){return this.getAttribute(\"facing-mode\")}set facingMode(t){this.setAttribute(\"facing-mode\",t)}get cameraResolution(){return this.getAttribute(\"camera-resolution\")}set cameraResolution(t){this.setAttribute(\"camera-resolution\",t)}get zoom(){return Number(this.getAttribute(\"zoom\"))||null}set zoom(t){const e=Number(t)||0;this.setAttribute(\"zoom\",e>0?Math.floor(e):0)}get loading(){return this.hasAttribute(\"loading\")}_stopVideoStreaming(){if(!this._videoElement||!this._stream)return;const[t]=this._stream.getVideoTracks();t&&t.stop(),this._videoElement.srcObject=null,this._stream=null}_requestGetUserMedia(){if(!e.isSupported())return;this.setAttribute(\"loading\",\"\");const t={video:{facingMode:{ideal:this.facingMode||\"user\"}},audio:!1};if(\"string\"==typeof this.cameraResolution){const[e,o]=this.cameraResolution.split(\"x\");t.video.width=e,t.video.height=o}navigator.mediaDevices.getUserMedia(t).then((t=>{this._videoElement.srcObject=t,this._stream=t,this._applyZoom(this.zoom)})).catch((t=>{this.dispatchEvent(new CustomEvent(\"capture-photo:error\",{bubbles:!0,composed:!0,detail:{error:t}}))})).finally((()=>{this.removeAttribute(\"loading\")}))}capture(){if(!this.loading)try{const t=this._canvasElement.getContext(\"2d\"),e=this._videoElement.videoWidth,o=this._videoElement.videoHeight;this._canvasElement.width=e,this._canvasElement.height=o,t.drawImage(this._videoElement,0,0,e,o);const i=this._canvasElement.toDataURL(\"image/png\");if(\"string\"==typeof i&&i.includes(\"data:image\")){if(!this.outputDisabled){const t=new Image;t.src=i,t.width=e,t.height=o,t.part=\"output-image\",this._emptyOutputElement(),this._outputElement&&this._outputElement.appendChild(t)}this.dispatchEvent(new CustomEvent(\"capture-photo:success\",{bubbles:!0,composed:!0,detail:{dataURI:i,width:e,height:o}}))}}catch(t){this.dispatchEvent(new CustomEvent(\"capture-photo:error\",{bubbles:!0,composed:!0,detail:{error:t}}))}}_onFacingModeButtonClick(t){t.preventDefault(),this.loading||(this.facingMode=\"user\"!==this.facingMode&&this.facingMode?\"user\":\"environment\")}_onCapturePhotoButtonClick(t){t.preventDefault(),this.capture()}_onVideoLoadedMetaData(t){const e=t.target;e.play().then((()=>{this.dispatchEvent(new CustomEvent(\"capture-photo:video-play\",{bubbles:!0,composed:!0,detail:{video:e}}))})).catch((t=>{this.dispatchEvent(new CustomEvent(\"capture-photo:error\",{bubbles:!0,composed:!0,detail:{error:t}}))})).finally((()=>{this.removeAttribute(\"loading\")}))}_emptyOutputElement(){this._outputElement&&Array.from(this._outputElement.childNodes).forEach((t=>t.remove()))}_applyZoom(t){if(!this._stream||!t)return;const[e]=this._stream.getVideoTracks();if(\"function\"!=typeof e.getCapabilities||\"function\"!=typeof e.getSettings)return;const o=e.getCapabilities();var i,n,s;\"zoom\"in e.getSettings()&&e.applyConstraints({advanced:[{zoom:(i=Number(t),n=o.zoom.min,s=o.zoom.max,Number.isNaN(n)&&(n=0),Number.isNaN(s)&&(s=0),Math.min(Math.max(i,Math.min(n,s)),Math.max(n,s)))}]})}_onCaptureButtonSlotChange(t){t.target&&\"capture-button\"===t.target.name&&(this._captureButton&&this._captureButton.removeEventListener(\"click\",this._onCapturePhotoButtonClick),this._captureButton=this._getCaptureButton(),this._captureButton&&(this._captureButton.addEventListener(\"click\",this._onCapturePhotoButtonClick),\"BUTTON\"===this._captureButton.nodeName||this._captureButton.hasAttribute(\"role\")||this._captureButton.setAttribute(\"role\",\"button\")))}_onFacingModeButtonSlotChange(t){t.target&&\"facing-mode-button\"===t.target.name&&(this._facingModeButton&&this._facingModeButton.removeEventListener(\"click\",this._onFacingModeButtonClick),this._facingModeButton=this._getFacingModeButton(),this._facingModeButton&&(this._facingModeButton.addEventListener(\"click\",this._onFacingModeButtonClick),\"BUTTON\"===this._facingModeButton.nodeName||this._facingModeButton.hasAttribute(\"role\")||this._facingModeButton.setAttribute(\"role\",\"button\")))}_getFacingModeButton(){return this._facingModeButtonSlot?this._facingModeButtonSlot.assignedElements({flatten:!0}).find((t=>\"BUTTON\"===t.nodeName||\"facing-mode-button\"===t.getAttribute(\"slot\"))):null}_getCaptureButton(){return this._captureButtonSlot?this._captureButtonSlot.assignedElements({flatten:!0}).find((t=>\"BUTTON\"===t.nodeName||\"capture-button\"===t.getAttribute(\"slot\"))):null}_upgradeProperty(t){if(Object.prototype.hasOwnProperty.call(this,t)){const e=this[t];delete this[t],this[t]=e}}static isSupported(){return Boolean(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)}static defineCustomElement(t=\"capture-photo\"){\"undefined\"==typeof window||window.customElements.get(t)||window.customElements.define(t,e)}}export{e as CapturePhoto};\n","import { CapturePhoto } from '@georapbox/capture-photo-element/dist/capture-photo.min.js';\n\n(async function () {\n  const capturePhotoEl = document.querySelector('capture-photo');\n  const resultsEl = document.getElementById('results');\n  const scanningEl = document.querySelector('.scanning');\n  const scanBtn = document.getElementById('scanBtn');\n  const errorEl = document.getElementById('error');\n  let videoLoadedFirstTime = false;\n  let rafId;\n\n  if (!('BarcodeDetector' in window)) {\n    capturePhotoEl.hidden = true;\n    errorEl.textContent = 'BarcodeDetector API is not supported by your browser.';\n    return;\n  }\n\n  document.addEventListener('capture-photo:error', evt => {\n    capturePhotoEl.hidden = true;\n    errorEl.textContent = evt.detail.error.message;\n  });\n\n  capturePhotoEl.addEventListener('capture-photo:video-play', () => {\n    if (!videoLoadedFirstTime) {\n      scanningEl.hidden = false;\n      scan();\n    }\n\n    videoLoadedFirstTime = true;\n  });\n\n  CapturePhoto.defineCustomElement();\n\n  const capturePhotoVideoEl = capturePhotoEl.shadowRoot.querySelector('video');\n\n  const barcodeDetector = new window.BarcodeDetector({\n    formats: await window.BarcodeDetector.getSupportedFormats()\n  });\n\n  function createResult(value) {\n    const divEl = document.createElement('div');\n    divEl.className = 'results__item';\n\n    try {\n      new URL(value);\n      const linkEl = document.createElement('a');\n      linkEl.href = value;\n      linkEl.setAttribute('target', '_blank');\n      linkEl.setAttribute('rel', 'noreferrer noopener');\n      linkEl.textContent = value;\n      divEl.appendChild(linkEl);\n    } catch (err) {\n      // Fail silently...\n    }\n\n    const spanEl = document.createElement('span');\n    spanEl.textContent = value;\n    divEl.appendChild(spanEl);\n\n    resultsEl.appendChild(divEl);\n  }\n\n  async function scan() {\n    try {\n      const barcodes = barcodeDetector.detect(capturePhotoVideoEl);\n      const results = await barcodes;\n\n      if (Array.isArray(results) && results.length > 0) {\n        window.cancelAnimationFrame(rafId);\n\n        createResult(results[0].rawValue);\n\n        scanningEl.hidden = true;\n        scanBtn.hidden = false;\n        resultsEl.hidden = false;\n\n        return;\n      }\n    } catch (err) {\n      // Fail silently...\n    }\n\n    rafId = window.requestAnimationFrame(scan);\n  }\n\n  scanBtn.addEventListener('click', () => {\n    scanningEl.hidden = false;\n    scanBtn.hidden = true;\n    resultsEl.hidden = true;\n\n    resultsEl.querySelectorAll('.results__item').forEach(el => el.remove());\n\n    scan();\n  });\n}());\n"],"names":["$1aa3411f32e58366$var$t","document","createElement","innerHTML","$1aa3411f32e58366$export$cc30a98fe3890794","HTMLElement","connectedCallback","this","_canvasElement","shadowRoot","querySelector","_outputElement","getElementById","_videoElement","addEventListener","_onVideoLoadedMetaData","_captureButtonSlot","_onCaptureButtonSlotChange","_captureButton","_getCaptureButton","_onCapturePhotoButtonClick","_facingModeButtonSlot","_onFacingModeButtonSlotChange","_facingModeButton","_getFacingModeButton","_supportedConstraints","facingMode","_onFacingModeButtonClick","hidden","_upgradeProperty","isSupported","dispatchEvent","CustomEvent","bubbles","composed","detail","error","name","message","_requestGetUserMedia","disconnectedCallback","_stopVideoStreaming","removeEventListener","attributeChangedCallback","t","e","o","_emptyOutputElement","cameraResolution","_applyZoom","zoom","observedAttributes","outputDisabled","hasAttribute","setAttribute","removeAttribute","getAttribute","Number","Math","floor","loading","_stream","getVideoTracks","stop","srcObject","video","ideal","audio","e1","split","width","height","navigator","mediaDevices","getUserMedia","then","catch","finally","capture","getContext","videoWidth","videoHeight","drawImage","i","toDataURL","includes","t1","Image","src","part","appendChild","dataURI","t2","preventDefault","target","play","Array","from","childNodes","forEach","remove","getCapabilities","getSettings","n","s","applyConstraints","advanced","min","max","isNaN","nodeName","assignedElements","flatten","find","Object","prototype","hasOwnProperty","call","static","Boolean","window","customElements","get","define","constructor","super","getSupportedConstraints","attachShadow","mode","content","cloneNode","bind","capturePhotoEl","resultsEl","scanningEl","scanBtn","errorEl","rafId","videoLoadedFirstTime","textContent","evt","scan","defineCustomElement","capturePhotoVideoEl","barcodeDetector","BarcodeDetector","formats","getSupportedFormats","async","barcodes","detect","results","isArray","length","cancelAnimationFrame","value","divEl","className","URL","linkEl","href","err","spanEl","createResult","rawValue","requestAnimationFrame","querySelectorAll","el"],"version":3,"file":"index.39b183c3.js.map"}